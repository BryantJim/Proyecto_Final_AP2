@page "/"

@using BLL


<AuthorizeView>
    <Authorized>
        <h1>Bienvenido!</h1>
        Hello @(context.User.Identity.Name)!

    <button @onclick="Consultar">Consultar usuarios</button>

    <div class="table-responsive text-nowrap">
        <table class="table table-striped">
            <thead class="thead-dark">
                <tr>
                    <th>ID</th>
                    <th>Username</th>
                </tr>
            </thead>
            <tbody class="bg-white">
                @foreach(var item in Lista)
                {
                <tr>
                    <td>@item.Id</td>
                    <td>@item.UserName</td>
                </tr>
                }
            </tbody>
        </table>
    </div>
    </Authorized>
    <NotAuthorized>
        <h1>Hello, world!</h1>

        Welcome to your new app.!

        <SurveyPrompt Title="How is Blazor working for you?" />
    </NotAuthorized>
</AuthorizeView>

@code
{
    [Inject]
    public UsuariosBLL usuarios { get; set; }

    List<Usuarios> Lista = new List<Usuarios>();

    protected override void OnInitialized()
    {
        Lista = new List<Usuarios>();
    }

    public async Task Consultar()
    {
        Lista = await usuarios.GetList(c => true);
    }
}
    
